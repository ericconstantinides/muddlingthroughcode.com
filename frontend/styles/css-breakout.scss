$root-pixels: 18px;

$site-width: 980px;
$site-padding: 0.5em;

$body-width: 700px;
$body-padding: 2em;

.site-container {
  width: calc(100% - ( #{$site-padding} * 2) );
  max-width: $site-width;
  margin-left: auto;
  margin-right: auto;
}
.body-container {
  width: calc(100% - ( #{$body-padding} * 2) );
  max-width: $body-width;
  margin-left: auto;
  margin-right: auto;
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// css-breakout--max
// This always extends to the outer edge of the viewport,
// - - - - - - - - - - - - - - - - - - - - - - - - - - - -
.css-breakout--max {
  width: 100vw;
  max-width: none;
  // convert the em padding to pixels (should be done smarter to test if it's ems)
  $px-padding: ((($body-padding * 2) / 1em) * $root-pixels);

  // narrower than the body width
  @media only screen and (max-width: $body-width + $px-padding ) {
    // break out of the body-container at the same rate as the padding
    margin-left: $body-padding * -1;
  }
  // wider than the body width
  @media only screen and (min-width: $body-width + $px-padding + 1px ) {
    // We start with "pulling left" exactly half the viewport.
    // From there we "add back on" half the width of the body, which puts us directly in the center
    margin-left: calc(-50vw + (#{$body-width} / 2));
  }
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// css-breakout--outer-container
// This always extends to the contained width of the site
// - - - - - - - - - - - - - - - - - - - - - - - - - - - -
.css-breakout--outer-container {
  max-width: none;
  $px-site-padding: ((($site-padding * 2) / 1em) * $root-pixels);
  $px-body-padding: ((($body-padding * 2) / 1em) * $root-pixels);
  @media only screen and (max-width: $site-width) {
    // this is the site-container and in
    width: 100vw;
    margin-left: calc(-50vw + (#{$body-width} / 2));
  }
  @media only screen and (max-width: $body-width + $px-body-padding ) {
    // this is the body container and in
    width: 100vw;
    margin-left: $body-padding * -1;
  }
  @media only screen and (min-width: $site-width + 1px) {
    // this is the outer one:
    width: $site-width;
    margin-left: (($site-width - $body-width) / -2);
  }
}

// - - - - - - - - - - - - - - - - - - - - - - - - - - - -
// css-breakout--inner-container
// This always extends to the contained width of the body
// - - - - - - - - - - - - - - - - - - - - - - - - - - - -
.css-breakout--inner-container {
  width: 100%;
  $px-padding: ((($body-padding * 2) / 1em) * $root-pixels);
  @media only screen and (max-width: $body-width) {
    width: 100vw;
    max-width: $body-width + ($px-padding * 2);
    margin-left: $body-padding * -1;
  }
  // this is the tweener period between the full width and the site padding:
  @media only screen and (min-width: $body-width + 1px ) and (max-width: $body-width + $px-padding + 1px ) {
    width: $body-width;
    max-width: none;
    margin-left: calc(50vw - (#{$body-width} / 2 + #{$px-padding} / 2));
  }
}